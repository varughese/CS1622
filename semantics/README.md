<div role="main" class="UtePc RCETm" dir="ltr" aria-hidden="false"><section id="h.p_21KAfu3rPPtm" class="yaqOZd LB7kq tpmmCb gk8rDe" style=""><div class="mYVXT"><div class="LS81yb VICjCf" tabindex="-1"><div class="hJDwNd-AhqUyc-uQSCkd purZT-AhqUyc-II5mzb pSzOP-AhqUyc-qWD73c JNdkSc"><div class="JNdkSc-SmKAyb"><div class="" jscontroller="sGwD4d" jsaction="zXBUYb:zTPCnb;zQF9Uc:Qxe3nd;" jsname="F57UId"><div class="oKdM2c Kzv0Me"><div id="h.p_-KnGS7c2PPtp" class="hJDwNd-AhqUyc-uQSCkd jXK9ad D2fZ2 OjCsFc wHaque GNzUNc"><div class="jXK9ad-SmKAyb"><div class="tyJCtd mGzaTb baZpAe lkHyyc">

# Part III: Semantic Analysis

<p id="h.p_JEcsesKeP0e1" dir="ltr" class="zfr3Q">In this part of the project, you will implement the semantic phase of your compiler. The semantic phase will walk the AST and perform certain analysis to determine the correctness of the program. Symbol references (variable and function names) must be resolved to definitions, the type of expressions must be inferred, and the compatibility of values in context must be checked. This involves checking for <strong>scope</strong> and<strong> type rules</strong> as specified by the language semantics. Please refer <a class="dhtgD aw5Odc" href="/view/cs1622sp2020/c-language?authuser=0">here</a>  to review our C- language design and semantics.  </p><p id="h.p_dyYchnmnXLeF" dir="ltr" class="zfr3Q">Before you start, I recommend that you review the background material available on <a class="dhtgD aw5Odc" href="https://www.google.com/url?q=https%3A%2F%2Fwww3.nd.edu%2F~dthain%2Fcompilerbook%2Fchapter7.pdf&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFU-FDkeF25p2Bdotfc8-lEcPVllQ" target="_blank">Chapter 7 â€“ Semantic Analysis</a> from the book "Introduction to Compilers and Language Design" by Douglas Thain.</p><p id="h.p_jyaV5Ot14yE6" dir="ltr" class="zfr3Q" style="text-align: ;">The AST is used during semantic analysis by the compiler to check for correct usage of the elements of the language. The compiler also produces a <a class="dhtgD aw5Odc" href="https://www.google.com/url?q=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSymbol_table&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHMHv4Fvl_LEFiaeT1UkCY3Avc4JA" target="_blank">symbol table</a> based on the AST during semantic analysis. A complete traversal of the AST allows verification of the correctness of the program given the language specification. After verifying correctness, the AST serves as the base for code generation.</p><p id="h.p_jSj0lA7M5PUV" dir="ltr" class="zfr3Q" style="text-align: ;">In particular, in addition to the AST data structure, you will be using the symbol table for checking scope and language types.  Remember if your compiler finds any semantic error, it should stop and the output file should be empty. That means, the AST <em>will not be written</em> to the output file. Below we provide you with a non-exhaustive check list you should be looking into.</p><h3 id="h.p_GkZbIShpSm_X" dir="ltr" class="zfr3Q OmQG5e" style="text-align: left;" tabindex="-1"><div jscontroller="Ae65rd" jsaction="touchstart:UrsOsc; click:KjsqPd; focusout:QZoaZ; mouseover:y0pDld; mouseout:dq0hvd;fv1Rjc:jbFSOd;CrfLRd:SzACGe;" class="CjVfdc"><div class="PPhIP rviiZ" jsname="haAclf"><div role="presentation" class="U26fgb mUbCce fKz7Od LRAOtb rm120e" jscontroller="mxS5xe" jsaction="click:cOuCgd; mousedown:UX7yZ; mouseup:lbsD7e; mouseenter:tfO1Yc; mouseleave:JywGue; focus:AHmuwe; blur:O22p3e; contextmenu:mg9Pef;" jsshadow="" aria-describedby="h.p_GkZbIShpSm_X" aria-label="Copy heading link" aria-disabled="false" data-tooltip="Copy heading link" aria-hidden="true" data-tooltip-position="top" data-tooltip-vertical-offset="12" data-tooltip-horizontal-offset="0"><a class="FKF6mc TpQm9d" href="#h.p_GkZbIShpSm_X" aria-label="Copy heading link" jsname="hiK3ld" role="button" aria-describedby="h.p_GkZbIShpSm_X"><div class="VTBa7b MbhUzd" jsname="ksKsZd"></div><span jsslot="" class="xjKiLb"><span class="Ce1Y1c" style="top: -11px"><svg class="OUGEr uav4k" width="22px" height="22px" viewBox="0 0 24 24" fill="currentColor" focusable="false"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></span></span></a></div></div>Check List for Semantic Analysis (non exhaustive):</div></h3><div class="s1gOZb"><pre id="h.p_83mjsAdBQl4Z" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;program&gt; ::= &lt;declaration-list&gt;</code></pre><pre id="h.p_LArvsI0gQl4c" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;declaration-list&gt; ::= &lt;declaration-list&gt; &lt;declaration&gt; | &lt;declaration&gt;</code></pre><pre id="h.p_YU-yRiUcQl4c" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;declaration&gt; ::= &lt;var-declaration&gt; | &lt;fun-declaration&gt;</code></pre></div><p id="h.p_VH1MaoopQl4d" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  All variables and functions must be declared before they are used</p><p id="h.p_EA31OZiPQl4d" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  The last declaration in a program needs to be a declaration of the form <code class="qM9fHf">void main (void)</code></p><p id="h.p_vlN4h3mNQl4e" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><div class="s1gOZb"><pre id="h.p_wvBkCUAAQl4e" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;var-declaration&gt; ::= &lt;type-specifier&gt; ID ; | &lt;type-specifier&gt; ID [ NUM ] ;</code></pre><pre id="h.p_boKoO7IZQl4f" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;type-specifier&gt; ::= int | void</code></pre></div><p id="h.p_sKci6j7zQl4g" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Variable declarations can only have <code class="qM9fHf">int</code> type.</p><p id="h.p_5-YEcgNnQl4g" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><div class="s1gOZb"><pre id="h.p_c8Q-k0LhQl4h" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;fun-declaration&gt; ::= &lt;type-specifier&gt; ID ( &lt;params&gt; ) &lt;compound-stmt&gt;</code></pre><pre id="h.p_gFDT7kQKQl4h" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;params&gt; ::= &lt;param-list&gt; | void</code></pre><pre id="h.p_w7e30WfjQl4i" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;param-list&gt; ::= &lt;param-list&gt; , &lt;param&gt; | &lt;param&gt;</code></pre><pre id="h.p_OOLKNZKCQl4i" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;param&gt; ::= &lt;type-specifier&gt; ID | &lt;type-specifier&gt; ID [ ] </code></pre></div><p id="h.p_KZlZSO-ZQl4j" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Parameter types <strong>for variable names</strong> cannot be void (except main function)</p><p id="h.p_Buo86HfXQl4j" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Parameters followed by brackets are vector parameters to which the size is variable</p><p id="h.p_5ZnC5aiWQl4k" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Parameters for arrays must match array-type variable during function call</p><p id="h.p_crcfD9NiQl4l" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Parameters for integer variables cannot be used as array references (array accesses/subscripts are valid, though)</p><p id="h.p_76TzgPeeQl4l" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Non-array parameters should not match arrays (array accesses/subscripts are valid, however)</p><p id="h.p_rebxHC2eQl4m" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Functions can be recursive (to the limit that declarations before-use allow)</p><p id="h.p_ZBHJInkAQl4m" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><div class="s1gOZb"><pre id="h.p_l6fn-vY6Ql4n" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;compound-stmt&gt; ::= { &lt;local-declarations&gt; &lt;statement-list&gt; }</code></pre></div><p id="h.p_lBjEiMcsQl4n" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Variable declaration has the same scope as the set of statements in braces and overrides the visibility of global variables.</p><p id="h.p_FyvPkK2XQl4o" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><div class="s1gOZb"><pre id="h.p_UaujcHBQQl4q" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;return-stmt&gt; ::= return ; | return &lt;expression&gt; ;</code></pre></div><p id="h.p_KGoK_2-ZQl4q" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Functions not declared as void must return values.</p><p id="h.p_SPCyCwedQl4r" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Functions declared as void must not return values.</p><p id="h.p_nhLhrVNiQl4r" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><div class="s1gOZb"><pre id="h.p_PsRA_LIHQl4s" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;expression&gt; ::= &lt;var&gt; = &lt;expression&gt; | &lt;simple-expression&gt;</code></pre><pre id="h.p_Pq0YMzr-Ql4s" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;var&gt; ::= ID | ID [ &lt;expression&gt; ]</code></pre><pre id="h.p_C7muGvztQl4t" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>...</code></pre></div><p id="h.p_fT8adAhoQl4u" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Variable must be declared.</p><p id="h.p_5FfLmyo6Ql4w" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Use of an array name anywhere is invalid except in arguments of function calls</p><p id="h.p_PXbtp9zeQl4x" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  An expression to be assigned to a variable must refer to data value that is stored at some address in memory.  </p><p id="h.p_-fxMZdSuQl4x" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Check correct assignments from return statements of <code class="qM9fHf">void</code> vs <code class="qM9fHf">int</code> functions</p><p id="h.p_axDqjaT-Ql4y" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Type checking of the expressions vs variable types</p><p id="h.p_S3SSZFeuQl4y" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><div class="s1gOZb"><pre id="h.p_Oq_BwTnCQl4z" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;factor&gt; ::= ( &lt;expression&gt; ) | &lt;var&gt; | &lt;call&gt; | NUM</code></pre></div><p id="h.p_rKx6lUv8Ql4z" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Check correct usage of function return</p><p id="h.p_2_qOqR3iQl40" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Array variables must be indexed, except in expressions containing a single ID (function calls)</p><p id="h.p_KJ14sIJ6Ql40" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><div class="s1gOZb"><pre id="h.p_6mmaTtL4Ql41" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;call&gt; ::= ID ( &lt;args&gt; )</code></pre><pre id="h.p_K0stnBH3Ql41" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;args&gt; ::= &lt;arg-list&gt; | empty</code></pre><pre id="h.p_E345b9u-Ql42" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>&lt;arg-list&gt; ::= &lt;arg-list&gt; , &lt;expression&gt; | &lt;expression&gt;</code></pre><pre id="h.p_lMRza13WQl42" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><br></pre></div><p id="h.p_2IcvFg6VQl43" dir="ltr" class="zfr3Q" style="text-align: left;">[   ]  Functions need to be declared before being called</p><p id="h.p_XPLnZbSkQl43" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  The number of arguments in a function call must be equal to the number of parameters in the declaration</p><p id="h.p_8Y9wIuT5Ql44" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><div class="s1gOZb"><pre id="h.p_6leTT9OxQl44" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>int input(void)  {...}</code></pre><pre id="h.p__xmLSGQYQl45" dir="ltr" class="zfr3Q FVr0A" style="text-align: left;"><code>void output(int x) {...}</code></pre></div><p id="h.p_Wb-LsOVmQl45" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Make sure to include these names (builtin functions)</p><p id="h.p_zEWbJcrOQl46" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Check return type, input, number of params.</p><p id="h.p_-QgPn5S7Ql46" dir="ltr" class="zfr3Q" style="text-align: left;"><br></p><p id="h.p_vqjkHRJcQl47" dir="ltr" class="zfr3Q" style="text-align: left;"><strong>Other general checks</strong></p><p id="h.p_kylwLZ15Ql47" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Using a function name in a variable name context (and vice-versa) should be disallowed.</p><p id="h.p_-LFRJ86-Ql47" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Function redeclared as function</p><p id="h.p_uucjIPBFQl48" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Function redeclared as variable</p><p id="h.p_hmbg2PeNQl48" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Function redeclared as parameter</p><p id="h.p_CDFqd0J4Ql49" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Function redeclared as local variable (allowed)</p><p id="h.p_otxiseovQl49" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Variable redeclared as variable</p><p id="h.p_U_4gNWmZQl4-" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Variable redeclared as function</p><p id="h.p_fx7rwQfnQl4-" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Variable redeclared as parameter</p><p id="h.p_tJlaCbvHQl4_" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Variable redeclared as local variable</p><p id="h.p_c3ljKB6qQl4_" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Parameter redeclared as parameter</p><p id="h.p_aFnl1W5AQl5A" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Parameter redeclared as local variable</p><p id="h.p_C5S1NtqxQl5A" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Parameter redeclared as local variable on inner scope (allowed)</p><p id="h.p_NaUnipyxQl5B" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Local variable redeclared as local variable on same scope</p><p id="h.p_d6XGELbTQl5B" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  Local variable redeclared as local variable on inner scope (allowed)</p><p id="h.p_S_Xq13kZQl5C" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  There are no declarations</p><p id="h.p_Dr1ciN9cQl5C" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  There is no main.</p><p id="h.p_PBLPSOYJQl5D" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  The last declaration is not a function.</p><p id="h.p_GT2snm8aQl5E" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  The last declaration name is not "main".</p><p id="h.p__TWFbP2IQl5F" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  The last declaration does not return void.</p><p id="h.p_DyG7Vr2vQl5F" dir="ltr" class="zfr3Q" style="text-align: left;">[  ]  The last declaration has more than zero params.</p></div></div></div></div></div></div></div></div></div></section><section id="h.p_V3TIuC5rjML2" class="yaqOZd" style=""><div class="yaqOZd IFuOkc"></div><div class="mYVXT"><div class="LS81yb VICjCf" tabindex="-1"><div class="hJDwNd-AhqUyc-uQSCkd purZT-AhqUyc-II5mzb pSzOP-AhqUyc-qWD73c JNdkSc"><div class="JNdkSc-SmKAyb"><div class="" jscontroller="sGwD4d" jsaction="zXBUYb:zTPCnb;zQF9Uc:Qxe3nd;" jsname="F57UId"><div class="oKdM2c Kzv0Me"><div id="h.p_k43SV8VOjMLs" class="hJDwNd-AhqUyc-uQSCkd jXK9ad D2fZ2 OjCsFc wHaque GNzUNc"><div class="jXK9ad-SmKAyb"><div class="tyJCtd mGzaTb baZpAe"><h3 id="h.p_MBJJNR-XjMLy" dir="ltr" class="zfr3Q OmQG5e" style="text-align: left;" tabindex="-1"><div jscontroller="Ae65rd" jsaction="touchstart:UrsOsc; click:KjsqPd; focusout:QZoaZ; mouseover:y0pDld; mouseout:dq0hvd;fv1Rjc:jbFSOd;CrfLRd:SzACGe;" class="CjVfdc"><div class="PPhIP rviiZ" jsname="haAclf"><div role="presentation" class="U26fgb mUbCce fKz7Od LRAOtb rm120e" jscontroller="mxS5xe" jsaction="click:cOuCgd; mousedown:UX7yZ; mouseup:lbsD7e; mouseenter:tfO1Yc; mouseleave:JywGue; focus:AHmuwe; blur:O22p3e; contextmenu:mg9Pef;" jsshadow="" aria-describedby="h.p_MBJJNR-XjMLy" aria-label="Copy heading link" aria-disabled="false" data-tooltip="Copy heading link" aria-hidden="true" data-tooltip-position="top" data-tooltip-vertical-offset="12" data-tooltip-horizontal-offset="0"><a class="FKF6mc TpQm9d" href="#h.p_MBJJNR-XjMLy" aria-label="Copy heading link" jsname="hiK3ld" role="button" aria-describedby="h.p_MBJJNR-XjMLy"><div class="VTBa7b MbhUzd" jsname="ksKsZd"></div><span jsslot="" class="xjKiLb"><span class="Ce1Y1c" style="top: -11px"><svg class="OUGEr uav4k" width="22px" height="22px" viewBox="0 0 24 24" fill="currentColor" focusable="false"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></span></span></a></div></div></div></div></div></div></div></div></div></section></div>